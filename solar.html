<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8">
<title>Ø­Ø³Ø§Ø¨ Ù…Ù†Ø¸ÙˆÙ…Ø© Ø§Ù„Ø·Ø§Ù‚Ø© Ø§Ù„Ø´Ù…Ø³ÙŠØ©</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
:root{
  --bg:#020617;
  --card:#020617;
  --accent:#06b6d4;
  --danger:#ef4444;
  --border:#1e293b;
  --muted:#94a3b8;
}

body{
  margin:0;
  background:#0f172a;
  font-family:system-ui,"Noto Naskh Arabic";
  color:#e5e7eb;
}

.container{
  max-width:1050px;
  margin:20px auto;
  padding:15px;
}

h1{text-align:center;margin-bottom:14px}

.card{
  background:var(--card);
  border-radius:14px;
  padding:14px;
  margin-bottom:14px;
  box-shadow:0 10px 30px rgba(0,0,0,.4);
}

.device{
  display:grid;
  grid-template-columns:1.4fr .7fr .6fr .6fr auto;
  gap:10px;
  align-items:center;
  margin-bottom:10px;
}

select,input[type=number]{
  width:100%;
  background:transparent;
  border:1px solid var(--border);
  color:#e5e7eb;
  padding:8px;
  border-radius:10px;
  font-size:14px;
}

.hours-col{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:4px;
  border:1px solid var(--border);
  border-radius:12px;
  padding:6px 4px;
}

.hours-col span{font-size:12px;color:var(--muted)}
.hours-val{font-size:16px;font-weight:700}

.btn-hour{
  width:30px;
  height:30px;
  border-radius:50%;
  border:none;
  background:var(--accent);
  color:#042027;
  font-weight:900;
  cursor:pointer;
}

.btn{
  background:var(--accent);
  color:#042027;
  border:none;
  padding:10px 14px;
  border-radius:12px;
  font-weight:700;
  cursor:pointer;
}

.btn.del{background:var(--danger);color:#fff}

.summary{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(180px,1fr));
  gap:10px;
}

.box{
  background:#020617;
  border:1px solid var(--border);
  border-radius:12px;
  padding:10px;
  text-align:center;
}

.small{font-size:12px;color:var(--muted)}
.value{font-size:18px;font-weight:800}
</style>
</head>

<body>
<div class="container">

<h1>ğŸ®Ø­Ø³Ø§Ø¨ Ù…Ù†Ø¸ÙˆÙ…Ø© Ø§Ù„Ø·Ø§Ù‚Ø© Ø§Ù„Ø´Ù…Ø³ÙŠØ©</h1>

<div class="card">
  <button class="btn" onclick="addDevice()">â• Ø¥Ø¶Ø§ÙØ© Ø¬Ù‡Ø§Ø²</button>
</div>

<div class="card" id="devices"></div>

<div class="card summary">
  <div class="box">
    <div class="small">Ø§Ù„Ù‚Ø¯Ø±Ø© Ø§Ù„Ù„Ø­Ø¸ÙŠØ©</div>
    <div class="value" id="inst">0 W</div>
  </div>
  <div class="box">
    <div class="small">Ø§Ù„Ø§Ø³ØªÙ‡Ù„Ø§Ùƒ Ø§Ù„ÙŠÙˆÙ…ÙŠ</div>
    <div class="value" id="daily">0 Wh</div>
  </div>
  <div class="box">
    <div class="small">Ø§Ù„Ø§Ø³ØªÙ‡Ù„Ø§Ùƒ Ø§Ù„Ù„ÙŠÙ„ÙŠ</div>
    <div class="value" id="night">0 Wh</div>
  </div>
  <div class="box">
    <div class="small">Ø­Ø¬Ù… Ø§Ù„Ø¨Ø·Ø§Ø±ÙŠØ© (+20Ùª)</div>
    <div class="value" id="battery">0 kWh</div>
  </div>
  <div class="box">
    <div class="small">Ø§Ù„Ø§Ù†ÙÙŠØ±ØªØ± Ø§Ù„Ù…Ù‚ØªØ±Ø­</div>
    <div class="value" id="inv">-</div>
  </div>
  <div class="box">
    <div class="small">Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ù„ÙˆØ§Ø­ (590W)</div>
    <div class="value" id="panels">0</div>
  </div>
</div>

</div>

<script>
/* ÙƒØªØ§Ù„ÙˆØ¬ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© */
const catalog={
  "Ø´Ø§Ø´Ø©":150,
  "Ø«Ù„Ø§Ø¬Ø©":200,
  "Ù…Ø±ÙˆØ­Ø©":70,
  "Ù…ÙƒÙŠÙ Ù†Ø³Ù…Ø©":250,
  "ØºØ³Ø§Ù„Ø©":600,
  "Ù„Ù…Ø¨Ø©":30,
  "Ø¨Ù„Ùƒ":10,
  "Ù…ÙˆØªÙˆØ± 1\"":750
};

let devices=[];

/* Ø¥Ø¶Ø§ÙØ© Ø¬Ù‡Ø§Ø² */
function addDevice(){
  devices.push({name:"Ø´Ø§Ø´Ø©",count:1,day:1,night:0});
  render();
}

/* ØªØºÙŠÙŠØ± Ø³Ø§Ø¹Ø§Øª */
function changeHour(i,type,delta){
  devices[i][type]=Math.max(0,Math.min(12,devices[i][type]+delta));
  render();
  calc();
}

/* Ø±Ø³Ù… Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© */
function render(){
  const wrap=document.getElementById("devices");
  wrap.innerHTML="";
  devices.forEach((d,i)=>{
    wrap.innerHTML+=`
    <div class="device">
      <select onchange="devices[${i}].name=this.value;calc()">
        ${Object.keys(catalog).map(k=>
          `<option ${k===d.name?"selected":""}>${k}</option>`
        ).join("")}
      </select>

      <input type="number" min="1" value="${d.count}"
        onchange="devices[${i}].count=parseInt(this.value||1);calc()">

      <div class="hours-col">
        <span>â˜€ï¸ Ù†Ù‡Ø§Ø±</span>
        <button class="btn-hour" onclick="changeHour(${i},'day',1)">+</button>
        <div class="hours-val">${d.day}</div>
        <button class="btn-hour" onclick="changeHour(${i},'day',-1)">âˆ’</button>
      </div>

      <div class="hours-col">
        <span>ğŸŒ™ Ù„ÙŠÙ„</span>
        <button class="btn-hour" onclick="changeHour(${i},'night',1)">+</button>
        <div class="hours-val">${d.night}</div>
        <button class="btn-hour" onclick="changeHour(${i},'night',-1)">âˆ’</button>
      </div>

      <button class="btn del" onclick="devices.splice(${i},1);render();calc()">âœ–</button>
    </div>
    `;
  });
  calc();
}

/* Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø§Ù†ÙÙŠØ±ØªØ± */
function inverterSuggestion(watt){
  if(watt < 800) return "Ø§Ù†ÙÙŠØ±ØªØ± 2.2 ÙƒÙŠÙ„Ùˆ";
  if(watt < 1800) return "Ø§Ù†ÙÙŠØ±ØªØ± 3.2 ÙƒÙŠÙ„Ùˆ";
  if(watt < 3300) return "Ø§Ù†ÙÙŠØ±ØªØ± 4.2 ÙƒÙŠÙ„Ùˆ";
  if(watt < 4800) return "Ø§Ù†ÙÙŠØ±ØªØ± 6.2 ÙƒÙŠÙ„Ùˆ";
  if(watt < 5800) return "Ø§Ù†ÙÙŠØ±ØªØ± 8.2 ÙƒÙŠÙ„Ùˆ";
  if(watt < 7800) return "Ø§Ù†ÙÙŠØ±ØªØ± 10.2 ÙƒÙŠÙ„Ùˆ";
  return "âš ï¸ ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ù…Ù‡Ù†Ø¯Ø³ Ø§Ù„Ù…Ù†Ø¸ÙˆÙ…Ø© Ø£ÙˆÙ„Ø§Ù‹";
}

/* Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª */
function calc(){
  let inst=0,daily=0,nightWh=0;

  devices.forEach(d=>{
    const watt=catalog[d.name]*d.count;
    inst+=watt;
    daily+=watt*(d.day+d.night);
    nightWh+=watt*d.night;
  });

  const batteryKwh=(nightWh*1.2)/1000;

  document.getElementById("inst").innerText=inst+" W";
  document.getElementById("daily").innerText=daily+" Wh";
  document.getElementById("night").innerText=nightWh+" Wh";
  document.getElementById("battery").innerText=batteryKwh.toFixed(2)+" kWh";
  document.getElementById("inv").innerText=inverterSuggestion(inst);
  document.getElementById("panels").innerText=Math.ceil(daily/(590*8*0.8));
}

/* ØªÙ‡ÙŠØ¦Ø© */
addDevice();
</script>

</body>
</html>